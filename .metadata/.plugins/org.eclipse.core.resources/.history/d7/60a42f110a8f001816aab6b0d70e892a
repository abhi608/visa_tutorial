package com.visa.prj.client;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.TypedQuery;

import com.visa.prj.entity.Product;
import com.visa.prj.util.JPAUtil;


public class ProductJPQLClient {
	public static void main(String[] args) {
		/*
		 * JPQL uses class and fields and not table and columns
		 * JPQL is case-sensitive about class and attributes
		 * JPQL is polymorphic
		 */
		EntityManager em = JPAUtil.getEntityManager();
		String qry = "SELECT p from Product p where p.category = :cat and p.price > :amt";
//		String qry = "SELECT p from Product p where p.category = ?1 and p.price > ?2";
		TypedQuery<Product> query = em.createQuery(qry, Product.class);
		query.setParameter("cat", "Beverages");
		query.setParameter("amt", 10.00);
//		query.setParameter(1, "Beverages");
//		query.setParameter(2, 10.00);
		
		List<Product> products = query.getResultList();
		
		for(Product p : products) {
			System.out.println(p);
		}
	}
}
